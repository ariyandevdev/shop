# ูุณุชูุฏุงุช ุณุณุชู ุฌุณุชุฌู - Search System Documentation

## ๐ ููุฑุณุช ูุทุงูุจ

1. [ูุนุฑู ฺฉู](#ูุนุฑู-ฺฉู)
2. [ูุนูุงุฑ ุณุณุชู](#ูุนูุงุฑ-ุณุณุชู)
3. [ฺฉุงููพูููุชโูุง ุณุณุชู](#ฺฉุงููพูููุชูุง-ุณุณุชู)
4. [ุฌุฑุงู ฺฉุงุฑ (Flow)](#ุฌุฑุงู-ฺฉุงุฑ-flow)
5. [ุฌุฒุฆุงุช ูู](#ุฌุฒุฆุงุช-ูู)

---

## ูุนุฑู ฺฉู

ุณุณุชู ุฌุณุชุฌู ุฏุฑ ุงู ูพุฑูฺู ุจู ฺฉุงุฑุจุฑุงู ุงูฺฉุงู ุฌุณุชุฌู ูุญุตููุงุช ุจุฑ ุงุณุงุณ ูุงู ู ุชูุถุญุงุช ุฑุง ูโุฏูุฏ. ุงู ุณุณุชู ุงุฒ ูุนูุงุฑ Next.js 14 ุจุง ุงุณุชูุงุฏู ุงุฒ Server Components ู Client Components ุงุณุชูุงุฏู ูโฺฉูุฏ.

### ูฺฺฏโูุง ุงุตู:

- โ ุฌุณุชุฌู ูุญุตููุงุช ุจุฑ ุงุณุงุณ ูุงู ู ุชูุถุญุงุช
- โ ุฌุณุชุฌู ุญุณุงุณ ุจู ุญุฑูู ุจุฒุฑฺฏ/ฺฉูฺฺฉ (Case-insensitive)
- โ ูุฑุชุจโุณุงุฒ ูุชุงุฌ (ููุช ู ูุงู)
- โ ููุงุด ุญุงูุช ุจุงุฑฺฏุฐุงุฑ (Loading State)
- โ ูุงูุจุฑ ุจุง Breadcrumb
- โ ูุฏุฑุช ุญุงูุช ุฎุงู (Empty State)

---

## ูุนูุงุฑ ุณุณุชู

ุณุณุชู ุฌุณุชุฌู ุงุฒ ุฏู ููุน ฺฉุงููพูููุช ุงุณุชูุงุฏู ูโฺฉูุฏ:

### 1. **Client Components** (ฺฉุงููพูููุชโูุง ุณูุช ฺฉูุงูุช)

- ฺฉุงููพูููุชโูุง ฺฉู ูุงุฒ ุจู ุชุนุงูู ฺฉุงุฑุจุฑ ุฏุงุฑูุฏ
- ุงุฒ React Hooks ุงุณุชูุงุฏู ูโฺฉููุฏ
- ุจุง `"use client"` ูุดุฎุต ูโุดููุฏ

### 2. **Server Components** (ฺฉุงููพูููุชโูุง ุณูุช ุณุฑูุฑ)

- ฺฉุงููพูููุชโูุง ฺฉู ุฏุงุฏูโูุง ุฑุง ุงุฒ ุฏุชุงุจุณ ูโุฎูุงููุฏ
- ุจู ุตูุฑุช ูพุดโูุฑุถ ุฏุฑ Next.js 14
- ุฏุณุชุฑุณ ูุณุชูู ุจู ุฏุชุงุจุณ ุฏุงุฑูุฏ

---

## ฺฉุงููพูููุชโูุง ุณุณุชู

### 1. **SearchInput** (`components/search-input.tsx`)

**ููุน:** Client Component  
**ูุธูู:** ุฏุฑุงูุช ูุฑูุฏ ุฌุณุชุฌู ุงุฒ ฺฉุงุฑุจุฑ

#### ูฺฺฏโูุง:

- ููุฏ ูุฑูุฏ ุฌุณุชุฌู ุจุง ุขฺฉูู
- ูุฏุฑุช state ูุญู ุจุฑุง query
- ููฺฏุงูโุณุงุฒ ุจุง URL parameters
- ุงุฑุณุงู ูุฑู ุจู ุตูุญู `/search`

#### ฺฉุฏ ฺฉูุฏ:

```typescript
const handleSearch = (e: React.FormEvent<HTMLFormElement>) => {
  e.preventDefault();
  const trimmedQuery = query.trim();
  if (trimmedQuery) {
    router.push(`/search?query=${trimmedQuery}`);
  } else {
    router.push("/search");
  }
};
```

#### Props:

- ูุฏุงุฑุฏ (ุงุฒ `useSearchParams` ุงุณุชูุงุฏู ูโฺฉูุฏ)

---

### 2. **SearchPage** (`app/search/page.tsx`)

**ููุน:** Server Component (Async)  
**ูุธูู:** ุตูุญู ุงุตู ุฌุณุชุฌู - ูุฏุฑุช state ู ุฑูุฏุฑ ฺฉุงููพูููุชโูุง

#### ูฺฺฏโูุง:

- ุฏุฑุงูุช `searchParams` ุงุฒ URL
- ุงุณุชุฎุฑุงุฌ `query` ู `sort` ุงุฒ ูพุงุฑุงูุชุฑูุง
- ุณุงุฎุช Breadcrumb navigation
- ุงุณุชูุงุฏู ุงุฒ Suspense ุจุฑุง Loading State

#### Props:

```typescript
type SearchPageProps = {
  searchParams: Promise<{ query?: string; sort?: string }>;
};
```

#### ุฌุฑุงู ฺฉุงุฑ:

1. ุฏุฑุงูุช ู await ฺฉุฑุฏู `searchParams`
2. ุงุณุชุฎุฑุงุฌ ู trim ฺฉุฑุฏู `query`
3. ุณุงุฎุช ุขุฑุงู breadcrumbs
4. ุฑูุฏุฑ Breadcrumbs ู ProductList ุจุง Suspense

---

### 3. **ProductList** (`components/ProductList.tsx`)

**ููุน:** Server Component (Async)  
**ูุธูู:** ุฌุณุชุฌู ุฏุฑ ุฏุชุงุจุณ ู ููุงุด ูุชุงุฌ

#### ูฺฺฏโูุง:

- ุฌุณุชุฌู ุฏุฑ ูุงู ู ุชูุถุญุงุช ูุญุตููุงุช
- ูพุดุชุจุงู ุงุฒ ูุฑุชุจโุณุงุฒ (ููุชุ ูุงู)
- ูุญุฏูุฏ ฺฉุฑุฏู ูุชุงุฌ ุจู 10 ูุญุตูู
- ููุงุด ูพุงู ููุงุณุจ ุจุฑุง ุญุงูุช ุฎุงู

#### Props:

```typescript
interface ProductListProps {
  query?: string; // ูุชู ุฌุณุชุฌู
  sort?: string; // ููุน ูุฑุชุจโุณุงุฒ
}
```

#### ููุทู ุฌุณุชุฌู:

```typescript
const where = searchQuery
  ? {
      OR: [
        { name: { contains: searchQuery, mode: "insensitive" } },
        { description: { contains: searchQuery, mode: "insensitive" } },
      ],
    }
  : {};
```

#### ุงููุงุน ูุฑุชุจโุณุงุฒ:

- `price-asc`: ููุช ุตุนูุฏ
- `price-desc`: ููุช ูุฒูู
- `name-asc`: ูุงู ุตุนูุฏ
- `name-desc`: ูุงู ูุฒูู
- ูพุดโูุฑุถ: ุชุงุฑุฎ ุงุฌุงุฏ (ูุฒูู)

---

### 4. **Breadcrumbs** (`components/Breadcrumbs.tsx`)

**ููุน:** Server Component  
**ูุธูู:** ููุงุด ูุณุฑ ูุงูุจุฑ

#### ูฺฺฏโูุง:

- ููุงุด ูุณุฑ ุงุฒ Home ุชุง ุตูุญู ุฌุงุฑ
- ููฺฉโูุง ูุงุจู ฺฉูฺฉ
- ุงุณุชูุงุฏู ุงุฒ ฺฉุงููพูููุชโูุง UI ุงุฒ shadcn/ui

#### Props:

```typescript
interface BreadcrumbsProps {
  items: BreadcrumbItemData[];
}

interface BreadcrumbItemData {
  label: string; // ูุชู ููุงุด
  href: string; // ููฺฉ
}
```

#### ูุซุงู:

```typescript
[
  { label: "Home", href: "/" },
  { label: 'Results for "laptop"', href: "/search?query=laptop" },
];
```

---

### 5. **ProductsSkeleton** (`app/ProductsSkeleton.tsx`)

**ููุน:** Server Component  
**ูุธูู:** ููุงุด ุญุงูุช ุจุงุฑฺฏุฐุงุฑ

#### ูฺฺฏโูุง:

- ุงุณุชูุงุฏู ุงุฒ `ProductGridSkeleton`
- ููุงุด ุงุณฺฉูุชโูุง ฺฉุงุฑุช ูุญุตูู
- ุจูุจูุฏ ุชุฌุฑุจู ฺฉุงุฑุจุฑ ุฏุฑ ุฒูุงู ุจุงุฑฺฏุฐุงุฑ

---

## ุฌุฑุงู ฺฉุงุฑ (Flow)

### ูุฑุญูู 1: ูุฑูุฏ ฺฉุงุฑุจุฑ

```
ฺฉุงุฑุจุฑ โ SearchInput โ ุชุงูพ ุฏุฑ ููุฏ ุฌุณุชุฌู
```

**ุฌุฒุฆุงุช:**

1. ฺฉุงุฑุจุฑ ุฏุฑ ููุฏ ุฌุณุชุฌู ุชุงูพ ูโฺฉูุฏ
2. `query` state ุจูโุฑูุฒุฑุณุงู ูโุดูุฏ
3. ุจุง submit ูุฑูุ `handleSearch` ุงุฌุฑุง ูโุดูุฏ

---

### ูุฑุญูู 2: ูุฏุงุช ุจู ุตูุญู ุฌุณุชุฌู

```
SearchInput โ router.push("/search?query=...") โ SearchPage
```

**ุฌุฒุฆุงุช:**

1. `router.push` ุจุง query parameter ุงุฌุฑุง ูโุดูุฏ
2. Next.js ุจู `/search` ูุฏุงุช ูโฺฉูุฏ
3. `SearchPage` ุฑูุฏุฑ ูโุดูุฏ

---

### ูุฑุญูู 3: ูพุฑุฏุงุฒุด ุฏุฑ ุณุฑูุฑ

```
SearchPage โ await searchParams โ ุงุณุชุฎุฑุงุฌ query ู sort
```

**ุฌุฒุฆุงุช:**

1. `searchParams` ุจู ุตูุฑุช Promise ุฏุฑุงูุช ูโุดูุฏ
2. ุจุง `await` ููุชุธุฑ ูโูุงูุฏ ุชุง resolve ุดูุฏ
3. `query` ู `sort` ุงุณุชุฎุฑุงุฌ ู trim ูโุดููุฏ

---

### ูุฑุญูู 4: ุณุงุฎุช Breadcrumb

```
SearchPage โ ุณุงุฎุช ุขุฑุงู breadcrumbs โ ุฑูุฏุฑ Breadcrumbs
```

**ุฌุฒุฆุงุช:**

1. ุขุฑุงู breadcrumbs ุจุง label ู href ุณุงุฎุชู ูโุดูุฏ
2. ุงฺฏุฑ query ูุฌูุฏ ุฏุงุดุชู ุจุงุดุฏุ label ุดุงูู query ูโุดูุฏ
3. ฺฉุงููพูููุช `Breadcrumbs` ุฑูุฏุฑ ูโุดูุฏ

---

### ูุฑุญูู 5: ุฌุณุชุฌู ุฏุฑ ุฏุชุงุจุณ

```
Suspense โ ProductList โ Prisma Query โ ุฏุชุงุจุณ
```

**ุฌุฒุฆุงุช:**

1. `Suspense` ฺฉุงููพูููุช `ProductList` ุฑุง wrap ูโฺฉูุฏ
2. `ProductList` query ุฑุง ุจู Prisma ูโูุฑุณุชุฏ
3. Prisma ุฏุฑ ุฌุฏูู `product` ุฌุณุชุฌู ูโฺฉูุฏ:
   - ุฏุฑ ููุฏ `name` (ุญุณุงุณ ุจู ุญุฑูู ูุณุช)
   - ุฏุฑ ููุฏ `description` (ุญุณุงุณ ุจู ุญุฑูู ูุณุช)
4. ูุชุงุฌ ุจุฑ ุงุณุงุณ `sort` ูุฑุชุจ ูโุดููุฏ
5. ุญุฏุงฺฉุซุฑ 10 ูุชุฌู ุจุฑฺฏุฑุฏุงูุฏู ูโุดูุฏ

---

### ูุฑุญูู 6: ููุงุด ูุชุงุฌ

```
ProductList โ ProductCard โ ุฑูุฏุฑ ุฏุฑ Grid
```

**ุฌุฒุฆุงุช:**

1. ุงฺฏุฑ ูุญุตูู ูพุฏุง ูุดุฏ: ูพุงู "No products found" ููุงุด ุฏุงุฏู ูโุดูุฏ
2. ุงฺฏุฑ ูุญุตูู ูพุฏุง ุดุฏ:
   - ุนููุงู "Search results for ..." ููุงุด ุฏุงุฏู ูโุดูุฏ
   - ุชุนุฏุงุฏ ูุชุงุฌ ููุงุด ุฏุงุฏู ูโุดูุฏ
   - ูุญุตููุงุช ุฏุฑ Grid (3 ุณุชูู ุฏุฑ ุฏุณฺฉุชุงูพ) ููุงุด ุฏุงุฏู ูโุดููุฏ

---

### ูุฑุญูู 7: ุญุงูุช ุจุงุฑฺฏุฐุงุฑ

```
Suspense โ ProductsSkeleton (ุฏุฑ ุฒูุงู ุจุงุฑฺฏุฐุงุฑ)
```

**ุฌุฒุฆุงุช:**

1. ุฏุฑ ุฒูุงู ุจุงุฑฺฏุฐุงุฑ `ProductList`ุ `fallback` ููุงุด ุฏุงุฏู ูโุดูุฏ
2. `ProductsSkeleton` ุงุณฺฉูุชโูุง ฺฉุงุฑุช ุฑุง ููุงุด ูโุฏูุฏ
3. ูพุณ ุงุฒ ุจุงุฑฺฏุฐุงุฑุ ูุชุงุฌ ูุงูุน ุฌุงฺฏุฒู ูโุดููุฏ

---

## ุฌุฒุฆุงุช ูู

### 1. Prisma Query Structure

#### ุฌุณุชุฌู:

```typescript
{
  OR: [
    { name: { contains: "query", mode: "insensitive" } },
    { description: { contains: "query", mode: "insensitive" } },
  ];
}
```

**ุชูุถุญ:**

- `OR`: ููุทู "ุง" - ุงฺฏุฑ ุฏุฑ ูุงู ุง ุชูุถุญุงุช ูพุฏุง ุดุฏ
- `contains`: ุฌุณุชุฌู substring
- `mode: "insensitive"`: ุญุณุงุณ ุจู ุญุฑูู ุจุฒุฑฺฏ/ฺฉูฺฺฉ ูุณุช

#### ูุฑุชุจโุณุงุฒ:

```typescript
orderBy: {
  price: "asc";
} // ุง "desc"
```

### 2. URL Parameters

#### ุณุงุฎุชุงุฑ URL:

```
/search?query=laptop&sort=price-asc
```

#### ูพุงุฑุงูุชุฑูุง:

- `query`: ูุชู ุฌุณุชุฌู (ุงุฎุชุงุฑ)
- `sort`: ููุน ูุฑุชุจโุณุงุฒ (ุงุฎุชุงุฑ)
  - `price-asc`: ููุช ุตุนูุฏ
  - `price-desc`: ููุช ูุฒูู
  - `name-asc`: ูุงู ุตุนูุฏ
  - `name-desc`: ูุงู ูุฒูู

### 3. Suspense ู Loading State

```typescript
<Suspense key={`${query}-${sort}`} fallback={<ProductsSkeleton />}>
  <ProductList query={query} sort={sort} />
</Suspense>
```

**ูฺฉุงุช:**

- `key` prop ุจุฑุง force re-render ููฺฏุงู ุชุบุฑ query ุง sort
- `fallback` ุฏุฑ ุฒูุงู ุจุงุฑฺฏุฐุงุฑ ููุงุด ุฏุงุฏู ูโุดูุฏ
- `ProductList` ฺฉ async component ุงุณุช

### 4. Type Safety

#### TypeScript Interfaces:

```typescript
// SearchPage
type SearchPageProps = {
  searchParams: Promise<{ query?: string; sort?: string }>;
};

// ProductList
interface ProductListProps {
  query?: string;
  sort?: string;
}

// Breadcrumbs
interface BreadcrumbsProps {
  items: BreadcrumbItemData[];
}
```

### 5. Error Handling

#### ุญุงูุช ุฎุงู:

```typescript
if (products.length === 0) {
  return <p>No products found...</p>;
}
```

#### Trim ฺฉุฑุฏู Query:

```typescript
const query = params.query?.trim() ?? "";
```

- ุญุฐู ูุงุตููโูุง ุงุถุงู
- ุงุณุชูุงุฏู ุงุฒ nullish coalescing ุจุฑุง ููุฏุงุฑ ูพุดโูุฑุถ

---

## ูููุฏุงุฑ ุฌุฑุงู ฺฉุงุฑ

```
โโโโโโโโโโโโโโโ
โ   ฺฉุงุฑุจุฑ     โ
โโโโโโโโฌโโโโโโโ
       โ
       โผ
โโโโโโโโโโโโโโโโโโโ
โ  SearchInput    โ (Client Component)
โ  - ุฏุฑุงูุช ูุฑูุฏ โ
โโโโโโโโฌโโโโโโโโโโโ
       โ
       โ router.push("/search?query=...")
       โผ
โโโโโโโโโโโโโโโโโโโ
โ   SearchPage    โ (Server Component)
โ  - ุฏุฑุงูุช paramsโ
โโโโโโโโฌโโโโโโโโโโโ
       โ
       โโโโบ Breadcrumbs (ุฑูุฏุฑ ูุณุฑ)
       โ
       โโโโบ Suspense
              โ
              โโโโบ ProductsSkeleton (Loading)
              โ
              โโโโบ ProductList
                     โ
                     โโโโบ Prisma Query
                     โ
                     โโโโบ ProductCard ร N
```

---

## ูุซุงูโูุง ุงุณุชูุงุฏู

### ูุซุงู 1: ุฌุณุชุฌู ุณุงุฏู

```
URL: /search?query=laptop

1. ฺฉุงุฑุจุฑ "laptop" ุฑุง ุฌุณุชุฌู ูโฺฉูุฏ
2. ูุชุงุฌ ุดุงูู ูุญุตููุงุช ฺฉู ูุงู ุง ุชูุถุญุงุช ุขูโูุง ุดุงูู "laptop" ุงุณุช
3. ูุฑุชุจโุณุงุฒ ูพุดโูุฑุถ: ุชุงุฑุฎ ุงุฌุงุฏ (ูุฒูู)
```

### ูุซุงู 2: ุฌุณุชุฌู ุจุง ูุฑุชุจโุณุงุฒ

```
URL: /search?query=phone&sort=price-asc

1. ฺฉุงุฑุจุฑ "phone" ุฑุง ุฌุณุชุฌู ูโฺฉูุฏ
2. ูุชุงุฌ ุจุฑ ุงุณุงุณ ููุช (ุตุนูุฏ) ูุฑุชุจ ูโุดููุฏ
3. ุงุฑุฒุงูโุชุฑู ูุญุตููุงุช ุงูู ููุงุด ุฏุงุฏู ูโุดููุฏ
```

### ูุซุงู 3: ุฌุณุชุฌู ุฎุงู

```
URL: /search

1. ฺฉุงุฑุจุฑ ุจุฏูู query ุจู ุตูุญู ูโุฑูุฏ
2. ููู ูุญุตููุงุช (10 ููุฑุฏ ุงูู) ููุงุด ุฏุงุฏู ูโุดููุฏ
3. ูุฑุชุจโุณุงุฒ ูพุดโูุฑุถ ุงุนูุงู ูโุดูุฏ
```

---

## ูฺฉุงุช ููู

### 1. ูุญุฏูุฏุช ูุชุงุฌ

- ุญุฏุงฺฉุซุฑ 10 ูุญุตูู ููุงุด ุฏุงุฏู ูโุดูุฏ (`take: 10`)
- ุจุฑุง pagination ูุงุฒ ุจู ูพุงุฏูโุณุงุฒ ุจุดุชุฑ ุงุณุช

### 2. ุนููฺฉุฑุฏ

- ุฌุณุชุฌู ุฏุฑ ุฏุชุงุจุณ ุงูุฌุงู ูโุดูุฏ (Server-side)
- ุจุฑุง ุจูุจูุฏ ุนููฺฉุฑุฏ ูโุชูุงู ุงุฒ Indexing ุงุณุชูุงุฏู ฺฉุฑุฏ

### 3. ุงููุช

- Query ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ trim ูโุดูุฏ
- ุงุฒ Prisma ุจุฑุง ุฌููฺฏุฑ ุงุฒ SQL Injection ุงุณุชูุงุฏู ูโุดูุฏ

### 4. ุชุฌุฑุจู ฺฉุงุฑุจุฑ

- Loading state ุจุง Suspense
- Empty state ุจุง ูพุงู ููุงุณุจ
- Breadcrumb ุจุฑุง ูุงูุจุฑ ุจูุชุฑ

---

## ุจูุจูุฏูุง ูพุดููุงุฏ

1. **Pagination**: ุงุถุงูู ฺฉุฑุฏู ุตูุญูโุจูุฏ ุจุฑุง ูุชุงุฌ ุจุดุชุฑ
2. **ููุชุฑูุง**: ุงุถุงูู ฺฉุฑุฏู ููุชุฑ ุจุฑ ุงุณุงุณ ุฏุณุชูโุจูุฏ
3. **ุฌุณุชุฌู ูพุดุฑูุชู**: ุฌุณุชุฌู ุฏุฑ ููุฏูุง ุจุดุชุฑ
4. **Auto-complete**: ูพุดููุงุฏุงุช ุฏุฑ ุญู ุชุงูพ
5. **ุฌุณุชุฌู ูุงุฒ**: ูพุดุชุจุงู ุงุฒ typo ู ุงุดุชุจุงูุงุช ุงููุง

---

## ุฎูุงุตู

ุณุณุชู ุฌุณุชุฌู ุงุฒ ฺูุฏู ฺฉุงููพูููุช ููุงููฺฏ ุชุดฺฉู ุดุฏู ุงุณุช:

- **SearchInput**: ุฏุฑุงูุช ูุฑูุฏ ุงุฒ ฺฉุงุฑุจุฑ
- **SearchPage**: ูุฏุฑุช ุตูุญู ู state
- **ProductList**: ุฌุณุชุฌู ู ููุงุด ูุชุงุฌ
- **Breadcrumbs**: ูุงูุจุฑ
- **ProductsSkeleton**: ุญุงูุช ุจุงุฑฺฏุฐุงุฑ

ุฌุฑุงู ฺฉุงุฑ ุงุฒ ุฏุฑุงูุช ูุฑูุฏ ฺฉุงุฑุจุฑ ุดุฑูุน ูโุดูุฏ ู ุจุง ููุงุด ูุชุงุฌ ุฏุฑ ุฏุชุงุจุณ ูพุงุงู ูโุงุจุฏ. ุชูุงู ูุฑุงุญู ุจู ุตูุฑุช Server-side ุงูุฌุงู ูโุดูุฏ ฺฉู ุจุงุนุซ ุจูุจูุฏ ุนููฺฉุฑุฏ ู SEO ูโุดูุฏ.

---

**ุชุงุฑุฎ ุงุฌุงุฏ:** 2024  
**ูุณุฎู:** 1.0  
**ููุณูุฏู:** Documentation Generator
